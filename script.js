const translations = {
    fi: {
      "nav.logo": "Ebbe Christensen",
      "nav.about": "Tietoa",
      "nav.experience": "Kokemus",
      "nav.education": "Koulutus",
      "nav.skills": "Taidot",
      "nav.projects": "Projektit",
      "nav.contact": "Yhteys",
      "nav.download_cv": "Lataa CV",
      "hero.name": "Ebbe Myrsky Mercurius Christensen",
      "hero.title": "Sähkö- ja automaatioalan & Ylioppilastutkinnon opiskelija",
      "hero.intro":
        "Utelias ja tavoitteellinen opiskelija, joka nauttii ongelmien ratkomisesta ja uuden oppimisesta. Etsin mahdollisuuksia kehittää itseäni ja osaamistani tulevaisuuden työuraa varten.",
      "hero.contact_btn": "Ota yhteyttä",
      "about.title": "Tietoa minusta",
      "about.text":
        "Olen rehellinen ja tarkka, nautin ongelmien ratkomisesta ja olen utelias oppimaan uutta. Ymmärrän hyvin ihmisiä ja olen innokas kehittämään itseäni sekä taitojani tulevaa työuraa varten.",
      "about.quote1": "“reipas”",
      "about.quote2": "“ahkera”",
      "about.quote3": "“oma-aloitteinen”",
      "about.note":
        "Esimieheni ovat korostaneet rehellisyyttäni, tarkkuuttani, ahkeruuttani ja joustokykyäni.",
      "experience.title": "Kokemus",
      "experience.1.title": "Kokki",
      "experience.1.company": "Compass Group, Food & Co. Pressi",
      "experience.1.date": "2 vk / 2024",
      "experience.1.desc":
        "Keittiön siivous, ruoanlaitto, leipominen, tiskienpesu, tukku tilausten vastaanotto",
      "experience.2.title": "Hyllyttäjä",
      "experience.2.company": "S-market Maunula",
      "experience.2.date": "2 vk / 2023",
      "experience.2.desc": "Hyllyjen täydentäminen, järjestäminen ja siivous",
      "experience.3.title": "Kokki (TET)",
      "experience.3.company": "Lounaskahvila Messi",
      "experience.3.date": "3 pv / 2023",
      "experience.3.desc":
        "Ruoan ja leivonnaisten valmistus, asiakaspalvelu (mm. kassalla)",
      "experience.4.title": "Kokki (TET)",
      "experience.4.company": "Compass Group, Olympiastadion",
      "experience.4.date": "1 vk / 2023",
      "experience.4.desc": "Keittiön siivous, ruoanlaitto, tiskienpesu",
      "education.title": "Koulutus",
      "education.1.title": "Sähkö- ja automaatioalan perustutkinto",
      "education.1.school": "Etelä-Kymenlaakson ammattiopisto",
      "education.1.date": "2024–",
      "education.2.title": "Ylioppilastutkinto",
      "education.2.school": "Haminan lukio",
      "education.2.date": "2024–",
      "education.3.title": "Stipendi: “Potku tulevaisuuteen”",
      "education.3.school": "Keskuskoulun stipendirahasto",
      "education.3.date": "1.6.2024",
      "education.3.desc":
        "Tunnustus tavoitteelliselle ja ryhdistäytyneelle opiskelijalle.",
      "skills.title": "Taidot",
      "skills.technical": "Tekniset taidot",
      "skills.1": "Windows 10 & 11",
      "skills.2": "Linux (eri jakelut)",
      "skills.3": "Microsoft Office (erinomainen)",
      "skills.4": "Python (perusteet)",
      "skills.5": "C# (perusteet)",
      "skills.soft": "Vuorovaikutus- ja työelämätaidot",
      "skills.6": "Ongelmanratkaisu",
      "skills.7": "Rehellisyys",
      "skills.8": "Tarkkuus",
      "skills.9": "Oma-aloitteisuus",
      "skills.10": "Joustavuus",
      "skills.languages": "Kielet",
      "skills.11": "Suomi (äidinkieli)",
      "skills.12": "Englanti (erinomainen)",
      "skills.13": "Ruotsi (alkeet)",
      "skills.certificates": "Kortit",
      "skills.14": "Hätäensiapukortti (09/2024–09/2027)",
      "skills.15": "Työturvakortti (10/2024–10/2029)",
      "skills.16": "Opiskelijan sähkötyöturvallisuuskortti (SFS-6002) (11/2024–11/2027)",
      "skills.17": "Tulityökortti (03/2025–03/2030)",
      "projects.title": "Projektit",
      "projects.1.title": "Portfolio-sivusto",
      "projects.1.desc":
        "Tämä CV-sivusto, rakennettu HTML:llä, CSS:llä ja JavaScriptillä, sisältää animoidun taustan ja lasimaisia efektejä.",
      "projects.1.tech": "HTML, CSS, JS",
      "projects.1.link": "GitHub",
      "contact.title": "Yhteystiedot",
      "contact.email": "ebbe@christensen.fi",
      "contact.github": "GitHub",
      "contact.linkedin": "LinkedIn",
      "contact.form.name": "Nimi",
      "contact.form.email": "Sähköposti",
      "contact.form.message": "Viesti",
      "contact.form.send": "Lähetä viesti",
      "contact.form.sending": "Lähetetään...",
      "contact.form.success": "Kiitos viestistäsi! Olen sinuun pian yhteydessä.",
      "contact.form.error": "Täytä kaikki kentät.",
      "footer.logo": "Ebbe Christensen",
      "footer.copyright": "Ebbe Christensen. Kaikki oikeudet pidätetään.",
    },
    en: {
      "nav.logo": "Ebbe Christensen",
      "nav.about": "About",
      "nav.experience": "Experience",
      "nav.education": "Education",
      "nav.skills": "Skills",
      "nav.projects": "Projects",
      "nav.contact": "Contact",
      "nav.download_cv": "Lataa CV",
      "hero.name": "Ebbe Myrsky Mercurius Christensen",
      "hero.title": "Electrical & Automation Student, Finnish Matriculation Examination",
      "hero.intro":
        "A curious, and goal-oriented student who enjoys solving problems and learning new things. I am looking for opportunities to develop myself and my skills for a future career.",
      "hero.contact_btn": "Contact Me",
      "about.title": "About Me",
      "about.text":
        "I am honest and precise, enjoy solving problems, and I am curious to learn new things. I understand people well and am eager to develop myself and my skills for my future career.",
      "about.quote1": "“energetic”",
      "about.quote2": "“hard-working”",
      "about.quote3": "“self-starter”",
      "about.note":
        "My supervisors have highlighted my honesty, precision, diligence, and flexibility.",
      "experience.title": "Experience",
      "experience.1.title": "Cook",
      "experience.1.company": "Compass Group, Food & Co. Pressi",
      "experience.1.date": "2 wks / 2024",
      "experience.1.desc":
        "Kitchen cleaning, cooking, baking, dishwashing, receiving wholesale orders",
      "experience.2.title": "Shelf Stocker",
      "experience.2.company": "S-market Maunula",
      "experience.2.date": "2 wks / 2023",
      "experience.2.desc": "Restocking, organizing, and cleaning store shelves",
      "experience.3.title": "Cook (TET)",
      "experience.3.company": "Lounaskahvila Messi",
      "experience.3.date": "3 days / 2023",
      "experience.3.desc":
        "Cooking, baking, and customer service (including cashier)",
      "experience.4.title": "Cook (TET)",
      "experience.4.company": "Compass Group, Olympiastadion",
      "experience.4.date": "1 wk / 2023",
      "experience.4.desc": "Kitchen cleaning, cooking, dishwashing",
      "education.title": "Education",
      "education.1.title": "Vocational Qualification in Electrical and Automation",
      "education.1.school": "Etelä-Kymenlaakso Vocational College",
      "education.1.date": "2024–",
      "education.2.title": "Finnish Matriculation Examination",
      "education.2.school": "Hamina Upper Secondary School",
      "education.2.date": "2024–",
      "education.3.title": "Scholarship: “Kick for the Future”",
      "education.3.school": "Keskuskoulu Scholarship Fund",
      "education.3.date": "1.6.2024",
      "education.3.desc":
        "Awarded to a goal-oriented and disciplined student.",
      "skills.title": "Skills",
      "skills.technical": "Technical Skills",
      "skills.1": "Windows 10 & 11",
      "skills.2": "Linux (various distros)",
      "skills.3": "Microsoft Office (excellent)",
      "skills.4": "Python (basics)",
      "skills.5": "C# (basics)",
      "skills.soft": "Soft Skills",
      "skills.6": "Problem-solving",
      "skills.7": "Honesty",
      "skills.8": "Precision",
      "skills.9": "Initiative",
      "skills.10": "Flexibility",
      "skills.languages": "Languages",
      "skills.11": "Finnish (native)",
      "skills.12": "English (excellent)",
      "skills.13": "Swedish (basic)",
      "skills.certificates": "Certificates & Cards",
      "skills.14": "First Aid Certificate (09/2024–09/2027)",
      "skills.15": "Occupational Safety Card (10/2024–10/2029)",
      "skills.16": "Student Electrical Safety Card (SFS-6002) (11/2024–11/2027)",
      "skills.17": "Hot work licence (03/2025–03/2030)",
      "projects.title": "Projects",
      "projects.1.title": "Portfolio Website",
      "projects.1.desc":
        "This CV website, built with HTML, CSS, and JavaScript, featuring animated backgrounds and glassmorphism.",
      "projects.1.tech": "HTML, CSS, JS",
      "projects.1.link": "GitHub",
      "contact.title": "Contact",
      "contact.email": "ebbe@christensen.fi",
      "contact.github": "GitHub",
      "contact.linkedin": "LinkedIn",
      "contact.form.name": "Your Name",
      "contact.form.email": "Your Email",
      "contact.form.message": "Your Message",
      "contact.form.send": "Send Message",
      "contact.form.sending": "Sending...",
      "contact.form.success":
        "Thank you for your message! I will get back to you soon.",
      "contact.form.error": "Please fill in all fields.",
      "footer.logo": "Ebbe Christensen",
      "footer.copyright": "Ebbe Christensen. All rights reserved.",
    },
  };
  
  function getPreferredLang() {
    const stored = localStorage.getItem("lang");
    if (stored) return stored;
    const nav = navigator.language || navigator.userLanguage || "en";
    if (nav.startsWith("fi")) return "fi";
    return "en";
  }
  
  function setLang(lang) {
    localStorage.setItem("lang", lang);
    document.documentElement.lang = lang;
    const dict = translations[lang] || translations.en;
    document
      .querySelectorAll("[data-i18n]")
      .forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (dict[key]) el.textContent = dict[key];
      });
    document
      .querySelectorAll("[data-i18n-placeholder]")
      .forEach((el) => {
        const key = el.getAttribute("data-i18n-placeholder");
        if (dict[key]) el.setAttribute("placeholder", dict[key]);
      });
    document
      .querySelectorAll(".form-label")
      .forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (dict[key]) el.textContent = dict[key];
      });
    const label = document.getElementById("lang-toggle-label");
    if (label) label.textContent = lang === "fi" ? "EN" : "FI";
  }
  
  function scrollWithOffset(id) {
    const el = document.getElementById(id);
    if (!el) return;
    const navbar = document.querySelector(".navbar");
    const navHeight = navbar ? navbar.offsetHeight : 0;
    const rect = el.getBoundingClientRect();
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    const top = rect.top + scrollTop - navHeight - 8;
    window.scrollTo({
      top: top,
      behavior: "smooth",
    });
  }
  
  document.addEventListener("DOMContentLoaded", function () {
    const navToggle = document.getElementById("nav-toggle");
    const navLinks = document.getElementById("nav-links");
    const navLinksGroup = document.querySelector(".nav-links-group");
    const links = navLinks.querySelectorAll("a");
    const sections = document.querySelectorAll("section");
    const yearSpan = document.getElementById("year");
    const fadeEls = document.querySelectorAll(".fade-in");
    const contactForm = document.getElementById("contact-form");
    const formMessage = document.getElementById("form-message");
    const langToggle = document.getElementById("lang-toggle");
    const backToTop = document.getElementById("back-to-top");
  
    function closeMenu() {
      navLinks.classList.remove("open");
      navToggle.setAttribute("aria-expanded", "false");
      document.body.style.overflow = "";
    }
  
    navToggle.addEventListener("click", function () {
      const isOpen = navLinks.classList.toggle("open");
      navToggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
      if (isOpen) {
        document.body.style.overflow = "hidden";
      } else {
        document.body.style.overflow = "";
      }
    });
  
    function handleNavLinkClick(e) {
      const href = this.getAttribute("href");
      if (href && href.startsWith("#")) {
        e.preventDefault();
        const id = href.replace("#", "");
        closeMenu();
        setTimeout(() => {
          scrollWithOffset(id);
        }, 10);
      }
    }
  
    links.forEach((link) => {
      link.addEventListener("click", handleNavLinkClick);
    });
  
    function setActiveLink() {
      let index = sections.length;
      while (--index && window.scrollY + 120 < sections[index].offsetTop) {}
      links.forEach((link) => link.classList.remove("active"));
      if (sections[index]) {
        const id = sections[index].id;
        const activeLink = navLinks.querySelector(`a[href="#${id}"]`);
        if (activeLink) activeLink.classList.add("active");
      }
    }
  
    setActiveLink();
    window.addEventListener("scroll", setActiveLink);
  
    if (yearSpan) {
      yearSpan.textContent = new Date().getFullYear();
    }
  
    if ("IntersectionObserver" in window) {
      const observer = new IntersectionObserver(
        (entries, obs) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
              obs.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.15 }
      );
      fadeEls.forEach((el) => observer.observe(el));
    } else {
      fadeEls.forEach((el) => el.classList.add("visible"));
    }
  
    if (contactForm) {
      contactForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const lang = localStorage.getItem("lang") || getPreferredLang();
        const dict = translations[lang] || translations.en;
        const name = contactForm.name.value.trim();
        const email = contactForm.email.value.trim();
        const message = contactForm.message.value.trim();
        if (!name || !email || !message) {
          formMessage.textContent = dict["contact.form.error"];
          formMessage.style.color = "#e57373";
          return;
        }
        formMessage.textContent = dict["contact.form.sending"];
        formMessage.style.color = "var(--accent-color)";
        fetch("https://formsubmit.co/ajax/ebbe@christensen.fi", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: JSON.stringify({
            name,
            email,
            message,
          }),
        })
          .then((response) => {
            if (response.ok) {
              formMessage.textContent = dict["contact.form.success"];
              formMessage.style.color = "var(--accent-color)";
              contactForm.reset();
            } else {
              formMessage.textContent = dict["contact.form.error"];
              formMessage.style.color = "#e57373";
            }
          })
          .catch(() => {
            formMessage.textContent = dict["contact.form.error"];
            formMessage.style.color = "#e57373";
          });
      });
    }
  
    function toggleLang() {
      const current = localStorage.getItem("lang") || getPreferredLang();
      const next = current === "fi" ? "en" : "fi";
      setLang(next);
    }
  
    if (langToggle) {
      langToggle.addEventListener("click", toggleLang);
    }
  
    setLang(getPreferredLang());
  
    window.addEventListener("resize", function () {
      if (window.innerWidth > 900) {
        navLinks.classList.remove("open");
        document.body.style.overflow = "";
      }
    });
  
    function handleBackToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  
    if (backToTop) {
      backToTop.addEventListener("click", handleBackToTop);
    }
  
    function toggleBackToTop() {
      if (window.scrollY > 200) {
        backToTop.classList.add("visible");
      } else {
        backToTop.classList.remove("visible");
      }
    }
  
    window.addEventListener("scroll", toggleBackToTop);
    toggleBackToTop();
  });
  